{"ast":null,"code":"import axios from 'axios';\nconst apiClient = axios.create({\n  baseURL: 'https://localhost:7230',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\napiClient.interceptors.request.use(config => {\n  const userData = localStorage.getItem('user');\n  if (userData) {\n    const user = JSON.parse(userData);\n    if (user.token) {\n      config.headers.Authorization = `Bearer ${user.token}`;\n    }\n  }\n  return config;\n}, error => Promise.reject(error));\nexport const authService = {\n  login: async data => {\n    const response = await apiClient.post('/api/Account/login', data);\n    if (response.data.token) {\n      localStorage.setItem('user', JSON.stringify(response.data));\n    }\n    return response.data;\n  },\n  register: async data => {\n    const response = await apiClient.post('/api/Account/register', data);\n    return response.data;\n  },\n  logout: () => {\n    localStorage.removeItem('user');\n    window.location.reload();\n  }\n};\nexport default apiClient;","map":{"version":3,"names":["axios","apiClient","create","baseURL","headers","interceptors","request","use","config","userData","localStorage","getItem","user","JSON","parse","token","Authorization","error","Promise","reject","authService","login","data","response","post","setItem","stringify","register","logout","removeItem","window","location","reload"],"sources":["D:/JoszkoStudia/5sem/Aplikacje_sieciowe_i_webowe/git/MyBudget/repos/MyBudgetFront/budget-app/src/api/axios.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { User, LoginRequest, RegisterRequest } from '../types';\r\n\r\n\r\nconst apiClient = axios.create({\r\n  baseURL: 'https://localhost:7230', \r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    const userData = localStorage.getItem('user');\r\n    if (userData) {\r\n      const user: User = JSON.parse(userData);\r\n      if (user.token) {\r\n        config.headers.Authorization = `Bearer ${user.token}`;\r\n      }\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n\r\nexport const authService = {\r\n  login: async (data: LoginRequest) => {\r\n\r\n    const response = await apiClient.post<User>('/api/Account/login', data);\r\n    \r\n    if (response.data.token) {\r\n      localStorage.setItem('user', JSON.stringify(response.data));\r\n    }\r\n    return response.data;\r\n  },\r\n\r\n  register: async (data: RegisterRequest) => {\r\n    const response = await apiClient.post('/api/Account/register', data);\r\n    return response.data;\r\n  },\r\n\r\n  logout: () => {\r\n    localStorage.removeItem('user');\r\n    window.location.reload();\r\n  },\r\n};\r\n\r\nexport default apiClient;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAIzB,MAAMC,SAAS,GAAGD,KAAK,CAACE,MAAM,CAAC;EAC7BC,OAAO,EAAE,wBAAwB;EACjCC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;AAGFH,SAAS,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAC/BC,MAAM,IAAK;EACV,MAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EAC7C,IAAIF,QAAQ,EAAE;IACZ,MAAMG,IAAU,GAAGC,IAAI,CAACC,KAAK,CAACL,QAAQ,CAAC;IACvC,IAAIG,IAAI,CAACG,KAAK,EAAE;MACdP,MAAM,CAACJ,OAAO,CAACY,aAAa,GAAG,UAAUJ,IAAI,CAACG,KAAK,EAAE;IACvD;EACF;EACA,OAAOP,MAAM;AACf,CAAC,EACAS,KAAK,IAAKC,OAAO,CAACC,MAAM,CAACF,KAAK,CACjC,CAAC;AAGD,OAAO,MAAMG,WAAW,GAAG;EACzBC,KAAK,EAAE,MAAOC,IAAkB,IAAK;IAEnC,MAAMC,QAAQ,GAAG,MAAMtB,SAAS,CAACuB,IAAI,CAAO,oBAAoB,EAAEF,IAAI,CAAC;IAEvE,IAAIC,QAAQ,CAACD,IAAI,CAACP,KAAK,EAAE;MACvBL,YAAY,CAACe,OAAO,CAAC,MAAM,EAAEZ,IAAI,CAACa,SAAS,CAACH,QAAQ,CAACD,IAAI,CAAC,CAAC;IAC7D;IACA,OAAOC,QAAQ,CAACD,IAAI;EACtB,CAAC;EAEDK,QAAQ,EAAE,MAAOL,IAAqB,IAAK;IACzC,MAAMC,QAAQ,GAAG,MAAMtB,SAAS,CAACuB,IAAI,CAAC,uBAAuB,EAAEF,IAAI,CAAC;IACpE,OAAOC,QAAQ,CAACD,IAAI;EACtB,CAAC;EAEDM,MAAM,EAAEA,CAAA,KAAM;IACZlB,YAAY,CAACmB,UAAU,CAAC,MAAM,CAAC;IAC/BC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;EAC1B;AACF,CAAC;AAED,eAAe/B,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}